function rName(e){$.ajax({type:"get",url:"http://api.51yuchu.com/restaurant/"+e+"/get",dataType:"json",success:function(e){if(e.succeed){var t=e.value.restaurant.name;$(".ordered-rname").html(t)}}})}function rDate(){var e=new Date;e.getYear(),e.getFullYear(),e.getMonth(),e.getDate(),e.getDay(),e.getTime(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),e.toLocaleDateString();e.toLocaleTimeString();e.toLocaleString();var t=e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日";if(e.getHours()<10?oHours="0"+e.getHours():oHours=e.getHours(),e.getMinutes()<10)var a="0"+e.getMinutes();else var a=e.getMinutes();var r=oHours+":"+a;$(".ordered-date").html(t),$(".ordered-time").html(r)}function CartSubmit(e){var t=1,a=4,r=3,s={order:{transportType:t,restaurantId:rId,type:a,totPayAmount:sPrice,platformId:r},items:e};$.ajax({type:"post",headers:{"x-access-token":token,"Content-Type":"application/json"},data:JSON.stringify(s),url:"http://api.51yuchu.com/dish/order/do?resubmitToken="+token,dataType:"json",success:function(e){if(e.succeed){console.log(e);var t=e.value.code;window.location.href="restaurantorderedsuccess.html#/confirm/"+rId+"/"+t+"/"+sPrice}}})}function getCart(){$.ajax({type:"get",async:!1,headers:{"x-access-token":token,"Content-Type":"application/json"},url:"http://api.51yuchu.com/cart/list?restaurantId="+rId+"&page=1&size=10",dataType:"json",success:function(e){for(var t=e.value.list,a=[],r=0;r<t.length;r++)a.push({id:t[r].shopCart.id,quantity:t[r].shopCart.quantity});$("#btn_ordered_ok").attr("items",JSON.stringify(a))}})}if(window.location.hash){var Urlhash=window.location.hash,hash=Urlhash.split("/"),rPage=hash[1];if("ordered"==rPage){var rId=hash[2],sPrice=hash[3],token=store.get("wxToken");$.ajax({type:"get",headers:{"x-access-token":token,"Content-Type":"application/json"},url:"http://api.51yuchu.com/cart/list?restaurantId="+rId+"&page=1&size=10",dataType:"json",success:function(e){if(e.succeed){for(var t=e.value.list,a="",r=0;r<t.length;r++)a+='<li><strong class="menu-name">'+t[r].menuItem.name+'</strong><div class="g-num"><p class="n1"><em>X</em> <em class="menu-num">'+t[r].shopCart.quantity+'</em></p><p class="n2"><em>¥</em> <em class="menu-price">'+t[r].menuItem.price+"</em></p></div></li>";for(var s=[],r=0;r<t.length;r++)s.push({id:t[r].shopCart.id,quantity:t[r].shopCart.quantity});rName(rId),$(".menu-list").html(a),$(".sum-price").html(sPrice),$(".minus-price").text();var n=sPrice-parseFloat($(".minus-price").text());$(".real-payment").html(n),rDate(),$("#btn_ordered_submit").click(function(){CartSubmit(s)})}}})}}$(function(){$(".icon-back").click(function(){window.location.href="restaurantordered.html#"+rId})});